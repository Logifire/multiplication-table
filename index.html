<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplikationstabel</title>
    <style>
        :root {
            --primary-color: #6C63FF;
            --secondary-color: #FF6B6B;
            --success-color: #4CAF50;
            --background-color: #F0F7FF;
            --text-color: #2D3436;
            --border-radius: 15px;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--background-color);
            text-align: center;
            padding: 15px;
            margin: 0;
            line-height: 1.6;
            color: var(--text-color);
        }

        h1 {
            color: var(--primary-color);
            font-size: 28px;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 25px;
            margin: 8px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        button:active {
            transform: scale(0.95);
        }

        button:hover {
            box-shadow: 0 6px 8px rgba(0,0,0,0.2);
        }

        table {
            margin: 20px auto;
            border-collapse: separate;
            border-spacing: 1px;  /* Reduced spacing */
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 8px 16px rgba(108, 99, 255, 0.1);
            overflow-x: auto;  /* Allow horizontal scroll if needed */
            table-layout: fixed;
        }

        th, td {
            padding: 8px 4px;
            font-size: 14px;
            border: none;
            width: 35px;  /* Slightly reduced width */
            height: 35px; /* Slightly reduced height */
            text-align: center;
            vertical-align: middle;
        }

        th:first-child {
            width: 50px;  /* Reduced width for row headers */
            position: sticky;  /* Keep first column visible */
            left: 0;
            background: white;
            z-index: 1;
        }

        .cell {
            transition: all 0.3s ease;
            border-radius: 8px;
            position: relative;
            transform-origin: center; /* Ensures rotation happens from center */
        }

        .cell.correct {
            background-color: #4CAF50;
            color: white;
            transform: rotate(360deg); /* Removed scale(1.1) */
        }

        .cell.incorrect {
            animation: shake 0.5s;
            background-color: var(--secondary-color);
            color: white;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        #timer {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary-color);
            margin: 15px 0;
            font-family: monospace;
        }

        #question {
            font-size: 28px;
            color: var(--primary-color);
            margin: 20px 0;
            animation: pop 0.3s ease;
        }

        #answer {
            padding: 15px;
            font-size: 24px;
            width: 120px;
            border: 2px solid var(--primary-color);
            border-radius: var(--border-radius);
            text-align: center;
            margin: 10px;
        }

        #feedback {
            font-size: 20px;
            margin: 15px 0;
            min-height: 30px;
            color: var(--primary-color);
        }

        .table-checkbox {
            width: 24px;
            height: 24px;
            accent-color: var(--primary-color);
        }

        @media screen and (max-width: 600px) {
            body {
                padding: 10px;
            }

            table {
                font-size: 14px;
            }

            th, td {
                padding: 6px 4px;
                width: 30px;  /* Smaller width for mobile */
                height: 30px; /* Smaller height for mobile */
                font-size: 12px;
            }

            th:first-child {
                width: 45px;  /* Adjusted for mobile */
            }

            button {
                width: calc(100% - 16px);
                margin: 8px;
                padding: 16px;
            }

            #answer {
                width: calc(100% - 40px);
                margin: 10px auto;
            }

            .table-checkbox {
                width: 20px;
                height: 20px;
            }
        }

        @media screen and (max-width: 375px) {
            body {
                padding: 5px;  /* Reduced padding */
            }

            h1 {
                font-size: 20px;  /* Smaller heading */
                margin-bottom: 10px;
            }

            table {
                border-spacing: 0px;
                font-size: 12px;
            }

            th, td {
                padding: 4px 2px;
                width: 28px;   /* Smaller width for iPhone SE */
                height: 28px;  /* Smaller height for iPhone SE */
                font-size: 11px;
            }

            th:first-child {
                width: 40px;
            }

            .table-checkbox {
                width: 16px;
                height: 16px;
            }

            button {
                padding: 10px 15px;
                font-size: 14px;
                margin: 4px;
            }

            #timer {
                font-size: 24px;
            }

            #question {
                font-size: 20px;
            }

            #answer {
                padding: 8px;
                font-size: 16px;
                width: 80px;
            }
        }

        /* Fun animations */
        @keyframes pop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .hidden-value {
            background-color: #E8EAED;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .hidden-value:after {
            content: "?";
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, var(--primary-color), #8B80FF);
            color: white;
            font-weight: bold;
            border-radius: 8px;
            transform: scale(0.9);
            transition: transform 0.2s;
        }

        .hidden-value:hover:after {
            transform: scale(1);
        }

        /* Add container for horizontal scrolling */
        .table-container {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 0 auto;
            position: relative;
        }
    </style>
</head>
<body>
    <h1>Multiplikationstabel 1-10</h1>
    <div id="timer">00:00.00</div>
    <button id="gameToggle" onclick="toggleGame()">Start Spillet</button>
    <button onclick="toggleCells()">Vis/Skjul Alle Felter</button>
    <div class="table-container">
        <table id="multiplicationTable">
            <thead>
                <tr>
                    <th></th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                    <th>6</th>
                    <th>7</th>
                    <th>8</th>
                    <th>9</th>
                    <th>10</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="1" checked> 1</label></th>
                    <td class="cell" data-value="1">1</td>
                    <td class="cell" data-value="2">2</td>
                    <td class="cell" data-value="3">3</td>
                    <td class="cell" data-value="4">4</td>
                    <td class="cell" data-value="5">5</td>
                    <td class="cell" data-value="6">6</td>
                    <td class="cell" data-value="7">7</td>
                    <td class="cell" data-value="8">8</td>
                    <td class="cell" data-value="9">9</td>
                    <td class="cell" data-value="10">10</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="2" checked> 2</label></th>
                    <td class="cell" data-value="2">2</td>
                    <td class="cell" data-value="4">4</td>
                    <td class="cell" data-value="6">6</td>
                    <td class="cell" data-value="8">8</td>
                    <td class="cell" data-value="10">10</td>
                    <td class="cell" data-value="12">12</td>
                    <td class="cell" data-value="14">14</td>
                    <td class="cell" data-value="16">16</td>
                    <td class="cell" data-value="18">18</td>
                    <td class="cell" data-value="20">20</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="3" checked> 3</label></th>
                    <td class="cell" data-value="3">3</td>
                    <td class="cell" data-value="6">6</td>
                    <td class="cell" data-value="9">9</td>
                    <td class="cell" data-value="12">12</td>
                    <td class="cell" data-value="15">15</td>
                    <td class="cell" data-value="18">18</td>
                    <td class="cell" data-value="21">21</td>
                    <td class="cell" data-value="24">24</td>
                    <td class="cell" data-value="27">27</td>
                    <td class="cell" data-value="30">30</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="4" checked> 4</label></th>
                    <td class="cell" data-value="4">4</td>
                    <td class="cell" data-value="8">8</td>
                    <td class="cell" data-value="12">12</td>
                    <td class="cell" data-value="16">16</td>
                    <td class="cell" data-value="20">20</td>
                    <td class="cell" data-value="24">24</td>
                    <td class="cell" data-value="28">28</td>
                    <td class="cell" data-value="32">32</td>
                    <td class="cell" data-value="36">36</td>
                    <td class="cell" data-value="40">40</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="5" checked> 5</label></th>
                    <td class="cell" data-value="5">5</td>
                    <td class="cell" data-value="10">10</td>
                    <td class="cell" data-value="15">15</td>
                    <td class="cell" data-value="20">20</td>
                    <td class="cell" data-value="25">25</td>
                    <td class="cell" data-value="30">30</td>
                    <td class="cell" data-value="35">35</td>
                    <td class="cell" data-value="40">40</td>
                    <td class="cell" data-value="45">45</td>
                    <td class="cell" data-value="50">50</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="6" checked> 6</label></th>
                    <td class="cell" data-value="6">6</td>
                    <td class="cell" data-value="12">12</td>
                    <td class="cell" data-value="18">18</td>
                    <td class="cell" data-value="24">24</td>
                    <td class="cell" data-value="30">30</td>
                    <td class="cell" data-value="36">36</td>
                    <td class="cell" data-value="42">42</td>
                    <td class="cell" data-value="48">48</td>
                    <td class="cell" data-value="54">54</td>
                    <td class="cell" data-value="60">60</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="7" checked> 7</label></th>
                    <td class="cell" data-value="7">7</td>
                    <td class="cell" data-value="14">14</td>
                    <td class="cell" data-value="21">21</td>
                    <td class="cell" data-value="28">28</td>
                    <td class="cell" data-value="35">35</td>
                    <td class="cell" data-value="42">42</td>
                    <td class="cell" data-value="49">49</td>
                    <td class="cell" data-value="56">56</td>
                    <td class="cell" data-value="63">63</td>
                    <td class="cell" data-value="70">70</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="8" checked> 8</label></th>
                    <td class="cell" data-value="8">8</td>
                    <td class="cell" data-value="16">16</td>
                    <td class="cell" data-value="24">24</td>
                    <td class="cell" data-value="32">32</td>
                    <td class="cell" data-value="40">40</td>
                    <td class="cell" data-value="48">48</td>
                    <td class="cell" data-value="56">56</td>
                    <td class="cell" data-value="64">64</td>
                    <td class="cell" data-value="72">72</td>
                    <td class="cell" data-value="80">80</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="9" checked> 9</label></th>
                    <td class="cell" data-value="9">9</td>
                    <td class="cell" data-value="18">18</td>
                    <td class="cell" data-value="27">27</td>
                    <td class="cell" data-value="36">36</td>
                    <td class="cell" data-value="45">45</td>
                    <td class="cell" data-value="54">54</td>
                    <td class="cell" data-value="63">63</td>
                    <td class="cell" data-value="72">72</td>
                    <td class="cell" data-value="81">81</td>
                    <td class="cell" data-value="90">90</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="10" checked> 10</label></th>
                    <td class="cell" data-value="10">10</td>
                    <td class="cell" data-value="20">20</td>
                    <td class="cell" data-value="30">30</td>
                    <td class="cell" data-value="40">40</td>
                    <td class="cell" data-value="50">50</td>
                    <td class="cell" data-value="60">60</td>
                    <td class="cell" data-value="70">70</td>
                    <td class="cell" data-value="80">80</td>
                    <td class="cell" data-value="90">90</td>
                    <td class="cell" data-value="100">100</td>
                </tr>
                <tr id="gameRow" class="hidden">
                    <th></th>
                    <td colspan="10">
                        <span id="question"></span>
                        <input type="number" id="answer" placeholder="Indtast dit svar" onkeydown="handleKeyDown(event)">
                        <button onclick="checkAnswer()">Tjek svar</button>
                        <p id="feedback"></p>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        let currentQuestion = {};
        let cellsVisible = false;
        let timerInterval;
        let startTime;
        let gameActive = false;

        function toggleGame() {
            if (gameActive) {
                stopGame();
                document.getElementById('gameToggle').textContent = 'Start Spillet';
            } else {
                startGame();
                document.getElementById('gameToggle').textContent = 'Stop Spillet';
            }
        }

        function startGame() {
            if (gameActive) return;
            gameActive = true;
            startTime = Date.now();
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 10);
            
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                if (!cell.classList.contains('solved')) {
                    cell.textContent = '?';
                    cell.classList.remove('correct', 'incorrect');
                    cell.classList.add('hidden-value');
                }
            });
            document.getElementById('gameRow').classList.remove('hidden');
            document.getElementById('answer').disabled = false;
            document.getElementById('feedback').textContent = '';
            generateQuestion();
        }

        function stopGame() {
            if (!gameActive) return;
            gameActive = false;
            clearInterval(timerInterval);
            
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                if (cell.textContent === '?') {
                    cell.classList.add('hidden-value');
                }
                cell.classList.remove('solved', 'correct', 'incorrect');
            });
            
            document.getElementById('gameRow').classList.add('hidden');
            document.getElementById('question').textContent = '';
            document.getElementById('answer').value = '';
            document.getElementById('answer').disabled = true;
            document.getElementById('feedback').textContent = 'Spillet er stoppet';
        }

        function updateTimer() {
            const elapsed = Date.now() - startTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            const milliseconds = Math.floor((elapsed % 1000) / 10); // Get 2 digits of milliseconds
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${milliseconds.toString().padStart(2, '0')}`;
        }

        function toggleCells() {
            const cells = document.querySelectorAll('.cell');
            cellsVisible = !cellsVisible;
            cells.forEach(cell => {
                if (!cell.classList.contains('solved')) {
                    cell.textContent = cellsVisible ? cell.getAttribute('data-value') : '?';
                    if (!gameActive) {
                        cell.classList.toggle('hidden-value', !cellsVisible);
                    }
                }
            });
        }

        function generateQuestion() {
            if (!gameActive) return;
            const selectedValues = Array.from(document.querySelectorAll('.table-checkbox:checked')).map(cb => parseInt(cb.value, 10));
            const unsolvedCells = [];
            
            selectedValues.forEach(num1 => {
                for (let col = 1; col <= 10; col++) {
                    const cell = document.querySelector(`#multiplicationTable tbody tr:nth-child(${num1}) td:nth-child(${col + 1})`);
                    if (cell && !cell.classList.contains('solved')) {
                        unsolvedCells.push({ 
                            row: num1,     // Rækken er den valgte talrække
                            col: col + 1,  // Kolonnen (+1 for at kompensere for th)
                            num1: col,     // Første faktor (fra kolonnen)
                            num2: num1     // Anden faktor (fra rækken)
                        });
                    }
                }
            });

            if (unsolvedCells.length === 0) {
                const finalTime = document.getElementById('timer').textContent;
                document.getElementById('feedback').textContent = `Alle opgaver er løst! Din tid: ${finalTime}`;
                document.getElementById('question').textContent = '';
                document.getElementById('answer').disabled = true;
                clearInterval(timerInterval); // Stop timer when finished
                return;
            }

            const randomIndex = Math.floor(Math.random() * unsolvedCells.length);
            currentQuestion = unsolvedCells[randomIndex];
            currentQuestion.answer = currentQuestion.num1 * currentQuestion.num2;
            document.getElementById('question').textContent = `${currentQuestion.num1} x ${currentQuestion.num2} = `;
            document.getElementById('answer').value = '';
            document.getElementById('answer').disabled = false;
            document.getElementById('feedback').textContent = '';
            document.getElementById('answer').focus();
        }

        function checkAnswer() {
            if (!gameActive) return;
            const userAnswer = parseInt(document.getElementById('answer').value, 10);
            const cell = document.querySelector(`#multiplicationTable tbody tr:nth-child(${currentQuestion.row}) td:nth-child(${currentQuestion.col})`);
            
            if (userAnswer === currentQuestion.answer) {
                cell.textContent = currentQuestion.answer;
                cell.classList.remove('hidden-value', 'incorrect');
                cell.classList.add('correct', 'solved');
                document.getElementById('answer').value = '';
                generateQuestion();
            } else {
                cell.classList.add('incorrect');
                setTimeout(() => cell.classList.remove('incorrect'), 500);
                document.getElementById('answer').select();
            }
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter') {
                checkAnswer();
            }
        }

        // Add new function for cell click handling
        function initializeCellClicks() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                cell.addEventListener('click', () => {
                    if (!gameActive && !cell.classList.contains('solved')) {
                        if (cell.textContent === '?') {
                            cell.textContent = cell.getAttribute('data-value');
                            cell.classList.remove('hidden-value');
                        } else {
                            cell.textContent = '?';
                            cell.classList.add('hidden-value');
                        }
                    }
                });
            });
        }

        // Initialize cell clicks when page loads
        document.addEventListener('DOMContentLoaded', initializeCellClicks);
    </script>
</body>
</html>