<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplikationstabel</title>
    <style>
        :root {
            --primary-color: #6C63FF;
            --secondary-color: #FF6B6B;
            --success-color: #4CAF50;
            --background-color: #F0F7FF;
            --text-color: #2D3436;
            --border-radius: 15px;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--background-color);
            text-align: center;
            padding: 15px;
            margin: 0;
            line-height: 1.6;
            color: var(--text-color);
        }

        h1 {
            color: var(--primary-color);
            font-size: 28px;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 25px;
            margin: 8px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        button:active {
            transform: scale(0.95);
        }

        button:hover {
            box-shadow: 0 6px 8px rgba(0,0,0,0.2);
        }

        table {
            margin: 20px auto;
            border-collapse: separate;
            border-spacing: 1px;  /* Reduced spacing */
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 8px 16px rgba(108, 99, 255, 0.1);
            overflow-x: auto;  /* Allow horizontal scroll if needed */
            table-layout: fixed;
        }

        th, td {
            padding: 8px 4px;
            font-size: 14px;
            border: none;
            width: 35px;  /* Slightly reduced width */
            height: 35px; /* Slightly reduced height */
            text-align: center;
            vertical-align: middle;
        }

        th:first-child {
            width: 50px;  /* Reduced width for row headers */
            position: sticky;  /* Keep first column visible */
            left: 0;
            background: white;
            z-index: 1;
        }

        .cell {
            transition: all 0.3s ease;
            border-radius: 8px;
            position: relative;
            transform-origin: center; /* Ensures rotation happens from center */
        }

        .cell.correct {
            background-color: #4CAF50;
            color: white;
            transform: rotate(360deg); /* Removed scale(1.1) */
        }

        .cell.incorrect {
            animation: shake 0.5s;
            background-color: var(--secondary-color);
            color: white;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        #timer {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary-color);
            margin: 15px 0;
            font-family: monospace;
        }

        #question {
            font-size: 28px;
            color: var(--primary-color);
            margin: 20px 0;
            animation: pop 0.3s ease;
        }

        #answer {
            padding: 15px;
            font-size: 24px;
            width: 120px;
            border: 2px solid var(--primary-color);
            border-radius: var(--border-radius);
            text-align: center;
            margin: 10px;
        }

        #feedback {
            font-size: 20px;
            margin: 15px 0;
            min-height: 30px;
            color: var(--primary-color);
        }

        .table-checkbox {
            width: 24px;
            height: 24px;
            accent-color: var(--primary-color);
        }

        @media screen and (max-width: 600px) {
            body {
                padding: 10px;
            }

            table {
                font-size: 14px;
            }

            th, td {
                padding: 6px 4px;
                width: 30px;  /* Smaller width for mobile */
                height: 30px; /* Smaller height for mobile */
                font-size: 12px;
            }

            th:first-child {
                width: 45px;  /* Adjusted for mobile */
            }

            button {
                width: calc(100% - 16px);
                margin: 8px;
                padding: 16px;
            }

            #answer {
                width: calc(100% - 16px); /* Match button width calculation */
                margin: 8px;
                box-sizing: border-box;
            }

            .table-checkbox {
                width: 20px;
                height: 20px;
            }
        }

        @media screen and (max-width: 375px) {
            body {
                padding: 5px;  /* Reduced padding */
            }

            h1 {
                font-size: 20px;  /* Smaller heading */
                margin-bottom: 10px;
            }

            table {
                border-spacing: 0px;
                font-size: 12px;
            }

            th, td {
                padding: 4px 2px;
                width: 28px;   /* Smaller width for iPhone SE */
                height: 28px;  /* Smaller height for iPhone SE */
                font-size: 11px;
            }

            th:first-child {
                width: 40px;
            }

            .table-checkbox {
                width: 16px;
                height: 16px;
            }

            button {
                padding: 10px 15px;
                font-size: 14px;
                margin: 4px;
            }

            #timer {
                font-size: 24px;
            }

            #question {
                font-size: 20px;
            }

            #answer {
                width: calc(100% - 8px); /* Adjust for smaller margins */
                margin: 4px;
                padding: 10px 15px;
                font-size: 14px;
            }
        }

        /* Fun animations */
        @keyframes pop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .hidden-value {
            background-color: #E8EAED;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .hidden-value:after {
            content: "?";
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, var(--primary-color), #8B80FF);
            color: white;
            font-weight: bold;
            border-radius: 8px;
            transform: scale(0.9);
            transition: transform 0.2s;
        }

        .hidden-value:hover:after {
            transform: scale(1);
        }

        /* Add container for horizontal scrolling */
        .table-container {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 0 auto;
            position: relative;
        }

        /* Add new styles for game controls */
        .game-controls {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 8px 16px rgba(108, 99, 255, 0.1);
        }

        .game-input-group {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            opacity: 0;
            height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .game-input-group.active {
            opacity: 1;
            height: auto;
            margin: 20px 0;
        }

        .game-input-group #question {
            font-size: 32px;
            margin: 0;
            min-width: 120px;
        }

        .game-input-group #answer {
            width: 120px;
            margin: 0;
            height: 48px;
            font-size: 24px;
            border: 2px solid var(--primary-color);
            transition: all 0.2s ease;
        }

        .game-input-group #answer:focus {
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.3);
            outline: none;
        }

        #gameToggle {
            width: auto;
            min-width: 200px;
            margin: 0 auto;
            display: block;
            background: linear-gradient(45deg, var(--primary-color), #8B80FF);
        }

        #feedback {
            padding: 10px;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
        }

        #feedback:not(:empty) {
            background: rgba(108, 99, 255, 0.1);
            margin: 15px 0;
        }

        @media screen and (max-width: 600px) {
            .game-controls {
                padding: 15px;
                margin: 10px;
            }

            .game-input-group {
                flex-direction: column;
                gap: 10px;
            }

            .game-input-group #question {
                font-size: 24px;
            }

            .game-input-group #answer {
                width: calc(100% - 16px);
                height: 40px;
                font-size: 20px;
            }

            #gameToggle {
                width: calc(100% - 16px);
                margin: 8px;
            }

            #feedback {
                font-size: 16px;
                padding: 8px;
            }
        }

        @media screen and (max-width: 375px) {
            .game-controls {
                padding: 10px;
                margin: 5px;
            }

            .game-input-group #question {
                font-size: 20px;
            }

            .game-input-group #answer {
                height: 36px;
                font-size: 18px;
            }
        }

        /* Add new animations */
        @keyframes glow {
            0% { box-shadow: 0 0 5px var(--success-color); }
            50% { box-shadow: 0 0 20px var(--success-color); }
            100% { box-shadow: 0 0 5px var(--success-color); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .cell.correct {
            animation: rotate360 0.5s ease-out, glow 1s ease-in-out;
            background-color: var(--success-color);
            color: white;
        }

        #question.active {
            animation: pulse 1s infinite;
        }

        .achievement-banner {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100%);
            background: linear-gradient(45deg, var(--primary-color), #8B80FF);
            color: white;
            padding: 15px 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .achievement-banner.show {
            transform: translateX(-50%) translateY(0);
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <!-- Add sound effects -->
    <audio id="correctSound" preload="auto">
        <source src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3" type="audio/mpeg">
    </audio>
    <audio id="completionSound" preload="auto">
        <source src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3" type="audio/mpeg">
    </audio>
</head>
<body>
    <h1>Multiplikationstabel 1-10</h1>
    <div id="timer">00:00.00</div>
    <button onclick="toggleCells()">Vis/Skjul Alle Felter</button>
    <div class="table-container">
        <table id="multiplicationTable">
            <thead>
                <tr>
                    <th></th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                    <th>6</th>
                    <th>7</th>
                    <th>8</th>
                    <th>9</th>
                    <th>10</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="1" checked> 1</label></th>
                    <td class="cell" data-value="1">1</td>
                    <td class="cell" data-value="2">2</td>
                    <td class="cell" data-value="3">3</td>
                    <td class="cell" data-value="4">4</td>
                    <td class="cell" data-value="5">5</td>
                    <td class="cell" data-value="6">6</td>
                    <td class="cell" data-value="7">7</td>
                    <td class="cell" data-value="8">8</td>
                    <td class="cell" data-value="9">9</td>
                    <td class="cell" data-value="10">10</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="2" checked> 2</label></th>
                    <td class="cell" data-value="2">2</td>
                    <td class="cell" data-value="4">4</td>
                    <td class="cell" data-value="6">6</td>
                    <td class="cell" data-value="8">8</td>
                    <td class="cell" data-value="10">10</td>
                    <td class="cell" data-value="12">12</td>
                    <td class="cell" data-value="14">14</td>
                    <td class="cell" data-value="16">16</td>
                    <td class="cell" data-value="18">18</td>
                    <td class="cell" data-value="20">20</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="3" checked> 3</label></th>
                    <td class="cell" data-value="3">3</td>
                    <td class="cell" data-value="6">6</td>
                    <td class="cell" data-value="9">9</td>
                    <td class="cell" data-value="12">12</td>
                    <td class="cell" data-value="15">15</td>
                    <td class="cell" data-value="18">18</td>
                    <td class="cell" data-value="21">21</td>
                    <td class="cell" data-value="24">24</td>
                    <td class="cell" data-value="27">27</td>
                    <td class="cell" data-value="30">30</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="4" checked> 4</label></th>
                    <td class="cell" data-value="4">4</td>
                    <td class="cell" data-value="8">8</td>
                    <td class="cell" data-value="12">12</td>
                    <td class="cell" data-value="16">16</td>
                    <td class="cell" data-value="20">20</td>
                    <td class="cell" data-value="24">24</td>
                    <td class="cell" data-value="28">28</td>
                    <td class="cell" data-value="32">32</td>
                    <td class="cell" data-value="36">36</td>
                    <td class="cell" data-value="40">40</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="5" checked> 5</label></th>
                    <td class="cell" data-value="5">5</td>
                    <td class="cell" data-value="10">10</td>
                    <td class="cell" data-value="15">15</td>
                    <td class="cell" data-value="20">20</td>
                    <td class="cell" data-value="25">25</td>
                    <td class="cell" data-value="30">30</td>
                    <td class="cell" data-value="35">35</td>
                    <td class="cell" data-value="40">40</td>
                    <td class="cell" data-value="45">45</td>
                    <td class="cell" data-value="50">50</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="6" checked> 6</label></th>
                    <td class="cell" data-value="6">6</td>
                    <td class="cell" data-value="12">12</td>
                    <td class="cell" data-value="18">18</td>
                    <td class="cell" data-value="24">24</td>
                    <td class="cell" data-value="30">30</td>
                    <td class="cell" data-value="36">36</td>
                    <td class="cell" data-value="42">42</td>
                    <td class="cell" data-value="48">48</td>
                    <td class="cell" data-value="54">54</td>
                    <td class="cell" data-value="60">60</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="7" checked> 7</label></th>
                    <td class="cell" data-value="7">7</td>
                    <td class="cell" data-value="14">14</td>
                    <td class="cell" data-value="21">21</td>
                    <td class="cell" data-value="28">28</td>
                    <td class="cell" data-value="35">35</td>
                    <td class="cell" data-value="42">42</td>
                    <td class="cell" data-value="49">49</td>
                    <td class="cell" data-value="56">56</td>
                    <td class="cell" data-value="63">63</td>
                    <td class="cell" data-value="70">70</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="8" checked> 8</label></th>
                    <td class="cell" data-value="8">8</td>
                    <td class="cell" data-value="16">16</td>
                    <td class="cell" data-value="24">24</td>
                    <td class="cell" data-value="32">32</td>
                    <td class="cell" data-value="40">40</td>
                    <td class="cell" data-value="48">48</td>
                    <td class="cell" data-value="56">56</td>
                    <td class="cell" data-value="64">64</td>
                    <td class="cell" data-value="72">72</td>
                    <td class="cell" data-value="80">80</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="9" checked> 9</label></th>
                    <td class="cell" data-value="9">9</td>
                    <td class="cell" data-value="18">18</td>
                    <td class="cell" data-value="27">27</td>
                    <td class="cell" data-value="36">36</td>
                    <td class="cell" data-value="45">45</td>
                    <td class="cell" data-value="54">54</td>
                    <td class="cell" data-value="63">63</td>
                    <td class="cell" data-value="72">72</td>
                    <td class="cell" data-value="81">81</td>
                    <td class="cell" data-value="90">90</td>
                </tr>
                <tr>
                    <th><label><input type="checkbox" class="table-checkbox" value="10" checked> 10</label></th>
                    <td class="cell" data-value="10">10</td>
                    <td class="cell" data-value="20">20</td>
                    <td class="cell" data-value="30">30</td>
                    <td class="cell" data-value="40">40</td>
                    <td class="cell" data-value="50">50</td>
                    <td class="cell" data-value="60">60</td>
                    <td class="cell" data-value="70">70</td>
                    <td class="cell" data-value="80">80</td>
                    <td class="cell" data-value="90">90</td>
                    <td class="cell" data-value="100">100</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="gameControls" class="game-controls">
        <button id="gameToggle" onclick="toggleGame()">Start Spillet</button>
        <div id="gameInputGroup" class="game-input-group">
            <span id="question"></span>
            <input type="number" 
                   id="answer" 
                   placeholder="Svar" 
                   onkeydown="handleKeyDown(event)"
                   aria-label="Dit svar">
            <button onclick="checkAnswer()">Tjek</button>
        </div>
        <p id="feedback" role="status" aria-live="polite"></p>
    </div>

    <script>
        // Update initial state
        let currentQuestion = {};
        let cellsVisible = true;  // Keep true for initial state
        let timerInterval;
        let startTime;
        let gameActive = false;

        function toggleGame() {
            if (gameActive) {
                stopGame();
                document.getElementById('gameToggle').textContent = 'Start Spillet';
            } else {
                startGame();
                document.getElementById('gameToggle').textContent = 'Stop Spillet';
            }
        }

        function resetGame() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                cell.textContent = cell.getAttribute('data-value');
                cell.classList.remove('hidden-value', 'correct', 'incorrect', 'solved');
            });
            document.getElementById('feedback').textContent = '';
            document.getElementById('question').textContent = '';
            document.getElementById('answer').value = '';
            document.getElementById('timer').textContent = '00:00.00';
            document.getElementById('gameInputGroup').classList.remove('active');
            document.getElementById('gameToggle').textContent = 'Start Spillet';
            gameActive = false;
            cellsVisible = true;
            if (timerInterval) {
                clearInterval(timerInterval);
            }
        }

        function startGame() {
            resetGame(); // Only reset when explicitly starting
            gameActive = true;
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 10);
            
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                cell.textContent = '?';
                cell.classList.add('hidden-value');
            });
            
            document.getElementById('gameToggle').textContent = 'Stop Spillet';
            document.getElementById('gameInputGroup').classList.add('active');
            document.getElementById('answer').disabled = false;
            generateQuestion();
        }

        function stopGame() {
            if (!gameActive) return;
            gameActive = false;
            clearInterval(timerInterval);
            
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                if (cell.textContent === '?') {
                    cell.classList.add('hidden-value');
                }
                cell.classList.remove('solved', 'correct', 'incorrect');
            });
            
            document.getElementById('gameInputGroup').classList.remove('active');
            document.getElementById('question').textContent = '';
            document.getElementById('answer').value = '';
            document.getElementById('answer').disabled = true;
            document.getElementById('feedback').textContent = 'Spillet er stoppet';
        }

        function updateTimer() {
            const elapsed = Date.now() - startTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            const milliseconds = Math.floor((elapsed % 1000) / 10); // Get 2 digits of milliseconds
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${milliseconds.toString().padStart(2, '0')}`;
        }

        function toggleCells() {
            const cells = document.querySelectorAll('.cell');
            cellsVisible = !cellsVisible;
            cells.forEach(cell => {
                if (!cell.classList.contains('solved')) {
                    cell.textContent = cellsVisible ? cell.getAttribute('data-value') : '?';
                    cell.classList.toggle('hidden-value', !cellsVisible);
                }
            });
        }

        function generateQuestion() {
            if (!gameActive) return;
            const selectedValues = Array.from(document.querySelectorAll('.table-checkbox:checked')).map(cb => parseInt(cb.value, 10));
            const unsolvedCells = [];
            
            selectedValues.forEach(num1 => {
                for (let col = 1; col <= 10; col++) {
                    const cell = document.querySelector(`#multiplicationTable tbody tr:nth-child(${num1}) td:nth-child(${col + 1})`);
                    if (cell && !cell.classList.contains('solved')) {
                        unsolvedCells.push({ 
                            row: num1,     // Rækken er den valgte talrække
                            col: col + 1,  // Kolonnen (+1 for at kompensere for th)
                            num1: col,     // Første faktor (fra kolonnen)
                            num2: num1     // Anden faktor (fra rækken)
                        });
                    }
                }
            });

            if (unsolvedCells.length === 0) {
                const finalTime = document.getElementById('timer').textContent;
                document.getElementById('completionSound').play();
                showAchievementBanner(`Fantastisk! Du klarede det på ${finalTime}!`);
                fireConfetti();
                
                // Update UI for completion state
                document.getElementById('gameInputGroup').classList.remove('active');
                document.getElementById('answer').value = '';
                document.getElementById('answer').disabled = true;
                document.getElementById('gameToggle').textContent = 'Start Nyt Spil';
                document.getElementById('feedback').textContent = `Alle opgaver er løst! Din tid: ${finalTime}`;
                
                gameActive = false;
                clearInterval(timerInterval);
                return;
            }

            const randomIndex = Math.floor(Math.random() * unsolvedCells.length);
            currentQuestion = unsolvedCells[randomIndex];
            currentQuestion.answer = currentQuestion.num1 * currentQuestion.num2;
            document.getElementById('question').textContent = `${currentQuestion.num1} x ${currentQuestion.num2} = `;
            document.getElementById('answer').value = '';
            document.getElementById('answer').disabled = false;
            document.getElementById('feedback').textContent = '';
            document.getElementById('answer').focus();
        }

        function checkAnswer() {
            if (!gameActive) return;
            const userAnswer = parseInt(document.getElementById('answer').value, 10);
            const cell = document.querySelector(`#multiplicationTable tbody tr:nth-child(${currentQuestion.row}) td:nth-child(${currentQuestion.col})`);
            
            if (userAnswer === currentQuestion.answer) {
                // Play sound
                document.getElementById('correctSound').play();

                // Create particles
                const rect = cell.getBoundingClientRect();
                for (let i = 0; i < 5; i++) {
                    createNumberParticle(
                        rect.left + rect.width / 2,
                        rect.top + rect.height / 2,
                        userAnswer
                    );
                }

                cell.textContent = currentQuestion.answer;
                cell.classList.remove('hidden-value', 'incorrect');
                cell.classList.add('correct', 'solved');
                document.getElementById('answer').value = '';
                generateQuestion();
            } else {
                cell.classList.add('incorrect');
                setTimeout(() => cell.classList.remove('incorrect'), 500);
                document.getElementById('answer').select();
            }
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter') {
                checkAnswer();
            }
        }

        // Add new function for number particles
        function createNumberParticle(x, y, number) {
            const particle = document.createElement('div');
            particle.textContent = number;
            particle.style.cssText = `
                position: fixed;
                left: ${x}px;
                top: ${y}px;
                font-size: 24px;
                color: var(--success-color);
                pointer-events: none;
                z-index: 1000;
            `;
            document.body.appendChild(particle);

            const angle = Math.random() * Math.PI * 2;
            const velocity = 2 + Math.random() * 2;
            let opacity = 1;

            function animate() {
                const dx = Math.cos(angle) * velocity;
                const dy = Math.sin(angle) * velocity - 2; // Add gravity
                x += dx;
                y += dy;
                opacity -= 0.02;

                particle.style.transform = `translate(${x}px, ${y}px)`;
                particle.style.opacity = opacity;

                if (opacity > 0) {
                    requestAnimationFrame(animate);
                } else {
                    particle.remove();
                }
            }
            animate();
        }

        function showAchievementBanner(message) {
            const banner = document.createElement('div');
            banner.className = 'achievement-banner';
            banner.textContent = message;
            document.body.appendChild(banner);
            
            setTimeout(() => banner.classList.add('show'), 100);
            setTimeout(() => {
                banner.classList.remove('show');
                setTimeout(() => banner.remove(), 500);
            }, 3000);
        }

        // Add new function for cell click handling
        function initializeCellClicks() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                cell.addEventListener('click', () => {
                    if (!gameActive && !cell.classList.contains('solved')) {
                        if (cell.textContent === '?') {
                            cell.textContent = cell.getAttribute('data-value');
                            cell.classList.remove('hidden-value');
                        } else {
                            cell.textContent = '?';
                            cell.classList.add('hidden-value');
                        }
                    }
                });
            });
        }

        // Remove or modify initializeTable to not hide cells initially
        function initializeTable() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                cell.textContent = cell.getAttribute('data-value'); // Show values initially
                cell.classList.remove('hidden-value'); // Ensure cells are visible
            });
            cellsVisible = true; // Match the visible state
        }

        function fireConfetti() {
            function createFirework() {
                const colors = ['#6C63FF', '#FF6B6B', '#4CAF50', '#FDD835'];
                
                // Launch position (random along bottom)
                const startX = 0.1 + Math.random() * 0.8; // 10% to 90% of screen width
                
                // First launch the firework up
                confetti({
                    particleCount: 1,
                    startVelocity: 60,
                    gravity: 1,
                    spread: 0,
                    origin: { x: startX, y: 1 },
                    colors: [colors[Math.floor(Math.random() * colors.length)]],
                    ticks: 200,
                    scalar: 1
                });

                // Then create the explosion
                setTimeout(() => {
                    confetti({
                        particleCount: 100,
                        startVelocity: 30,
                        gravity: 0.5,
                        spread: 360,
                        origin: { x: startX, y: 0.5 },
                        colors: colors,
                        ticks: 200,
                        scalar: 1.2,
                        shapes: ['circle']
                    });
                }, 1000);
            }

            // Launch multiple fireworks with slight delays
            let fireworkCount = 5;
            for(let i = 0; i < fireworkCount; i++) {
                setTimeout(createFirework, i * 600);
            }
        }

        // Initialize cell clicks when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeTable();
            initializeCellClicks();
        });
    </script>
</body>
</html>